//import org.apache.tools.ant.filters.ReplaceTokens

plugins {
    id 'java'
    id 'kr.entree.spigradle' version '2.2.4'
}

group = 'fr.minemobs'
version = '1.1'

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

repositories {
    mavenCentral()
}

dependencies {
    compileOnly spigot('1.16.5')
    compileOnly 'org.jetbrains:annotations:21.0.1'
}

/*
processResources {
    from(sourceSets.main.resources.srcDirs) {
        filter ReplaceTokens, tokens: [version: version]
    }
}
*/

spigot {
    authors 'Minemobs'
    apiVersion '1.16'
    commands {
        cc {
            aliases 'colorcode', 'chatcolor'
            usage '/<command>'
        }
        craft {
            aliases 'crafting'
            permission 'minemobsutils.craftcommand'
            permissionMessage '§8[§4Minemobs Utils§8] §4You do not have the permission!'
            usage '/<command>'
        }
        ec {
            aliases 'enderchest'
            permission 'minemobsutils.enderchest'
            permissionMessage '§8[§4Minemobs Utils§8] §4You do not have the permission!'
            usage '/<command> [target] [source]'
        }
        egive {
            aliases 'enchantgive'
            permission 'minemobsutils.enchantgive'
            permissionMessage '§8[§4Minemobs Utils§8] §4You do not have the permission!'
            usage '/<command>'
        }
    }

    debug {
        args '--nojline', '--max-players', '100'
        jvmArgs '-Xmx4G'
        serverPort 25565
    }
}

task copyFile(type: Copy){
    from file("$buildDir/libs/minemobsutils-1.1.jar")
    into file("E:\\Users\\minemobs\\IdeaProjects\\SpigotProject\\MinemobsUtils\\debug\\spigot\\plugins")
}

build.finalizedBy(copyFile)